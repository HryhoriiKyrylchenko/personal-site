<button
  #btn
  class="lang-switcher"
  (click)="toggle()"
  (keydown.enter)="toggle()"
  (keydown.space)="toggle()"
  [attr.aria-expanded]="open()"
>
  @if (!isMobile()) {
    <svg class="switcher-img" [class.rotated]="open()" viewBox="0 0 11 10" xmlns="http://www.w3.org/2000/svg">
      <path d="M4.65865 10.0003L-0.000444412 0.852539L1.81774 0.852539L5.19842 7.86958L5.08478 7.81277L5.36887 7.81277L5.25524 7.86958L8.63592 0.852539L10.4541 0.852539L5.79501 10.0003L4.65865 10.0003Z" fill="currentColor"/>
    </svg>
    {{ currentLangName() }}
  } @else {
    <svg class="switcher-img" [class.rotated]="open()" viewBox="0 0 11 10" xmlns="http://www.w3.org/2000/svg">
      <path d="M4.65865 10.0003L-0.000444412 0.852539L1.81774 0.852539L5.19842 7.86958L5.08478 7.81277L5.36887 7.81277L5.25524 7.86958L8.63592 0.852539L10.4541 0.852539L5.79501 10.0003L4.65865 10.0003Z" fill="currentColor"/>
    </svg>
    <svg width="22" height="21" viewBox="0 0 22 21" xmlns="http://www.w3.org/2000/svg">
      <path d="M11.2597 21C5.46663 21 0.759766 16.293 0.759766 10.4999C0.759766 4.70684 5.46663 0 11.2597 0C17.0528 0 21.7598 4.70684 21.7598 10.4999C21.7598 16.293 17.0528 21 11.2597 21ZM11.2597 0.573222C5.78847 0.573222 1.33302 5.02868 1.33302 10.4999C1.33302 15.9712 5.78847 20.4268 11.2597 20.4268C16.731 20.4268 21.1865 15.9712 21.1865 10.4999C21.1865 5.02868 16.7411 0.573222 11.2597 0.573222Z" fill="currentColor"/>
      <path d="M11.2295 20.8994C11.0887 20.8994 10.968 20.7988 10.9479 20.658C10.9178 20.5072 11.0284 20.3562 11.1793 20.3261C15.2224 19.6321 18.2698 15.4079 18.2698 10.4999C18.2698 5.66225 15.3934 1.54877 11.4408 0.72406C11.2899 0.693888 11.1893 0.54306 11.2195 0.382141C11.2497 0.231279 11.4005 0.130734 11.5615 0.160906C15.7856 1.04596 18.8431 5.40075 18.8431 10.4999C18.8431 15.6795 15.5945 20.1551 11.2798 20.8893C11.2597 20.8994 11.2396 20.8994 11.2295 20.8994Z" fill="currentColor"/>
      <path d="M11.2598 20.8994C11.2396 20.8994 11.2296 20.8994 11.2095 20.8994C6.91495 20.1652 3.67646 15.6896 3.67646 10.51C3.67646 5.41082 6.72386 1.05603 10.9279 0.170973C11.0787 0.140801 11.2296 0.241346 11.2698 0.392208C11.3 0.54307 11.1994 0.693898 11.0486 0.734128C7.10604 1.5689 4.24971 5.68237 4.24971 10.51C4.24971 15.418 7.28708 19.6422 11.3101 20.3361C11.4609 20.3663 11.5715 20.5072 11.5414 20.6681C11.5213 20.7988 11.4006 20.8994 11.2598 20.8994Z" fill="currentColor"/>
      <path d="M11.2597 6.69831C8.45364 6.69831 5.81861 5.60199 3.83729 3.62066L4.23958 3.21834C6.11027 5.08903 8.6045 6.12496 11.2597 6.12496C13.945 6.12496 16.4695 5.06897 18.3502 3.14799L18.7525 3.55032C16.7612 5.58192 14.1059 6.69831 11.2597 6.69831Z" fill="currentColor"/>
      <path d="M4.16923 17.852L3.76694 17.4497C5.75832 15.4181 8.42353 14.3017 11.2597 14.3017C14.0658 14.3017 16.7009 15.398 18.6822 17.3793L18.2799 17.7817C16.4092 15.911 13.9149 14.875 11.2597 14.875C8.57439 14.875 6.04998 15.931 4.16923 17.852Z" fill="currentColor"/>
      <path d="M21.4781 10.2184H1.05135V10.7916H21.4781V10.2184Z" fill="currentColor"/>
      <path d="M11.2597 21C11.0988 21 10.9782 20.8692 10.9782 20.7184V0.291706C10.9782 0.130786 11.1089 0.0100673 11.2598 0.0100673C11.4207 0.0100673 11.5414 0.140844 11.5414 0.291706V20.7184C11.5515 20.8692 11.4207 21 11.2597 21Z" fill="currentColor"/>
    </svg>
  }
</button>

@if (open()) {
  <div class="lang-menu-container">
    <ul class="lang-menu" [style.min-width.px]="buttonWidth()">
      @for (lang of AVAILABLE_LANGS; track lang) {
        <li (click)="select(lang)" (keydown.enter)="select(lang)" tabindex="0">
          {{ currentLangNameFor(lang) }}
        </li>
      }
      @if (isMobileOrTablet()) {
        <button class="lang-close-btn" (click)="toggle()">
          <svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
            <path d="M11.0013 21.1788C8.3913 21.1788 5.78128 20.1888 3.80128 18.1988C1.88128 16.2788 0.821289 13.7188 0.821289 10.9988C0.821289 8.27876 1.88128 5.71875 3.80128 3.79875C7.77129 -0.171253 14.2313 -0.171253 18.2013 3.79875C22.1713 7.76875 22.1713 14.2288 18.2013 18.1988C16.2213 20.1788 13.6113 21.1788 11.0013 21.1788ZM11.0013 1.38877C8.5413 1.38877 6.07129 2.32877 4.20129 4.19877C2.38129 6.01877 1.38129 8.42876 1.38129 10.9988C1.38129 13.5688 2.38129 15.9787 4.20129 17.7987C7.95129 21.5487 14.0513 21.5487 17.8013 17.7987C21.5513 14.0487 21.5513 7.94877 17.8013 4.19877C15.9313 2.31877 13.4613 1.38877 11.0013 1.38877Z" fill="currentColor"/>
            <path d="M6.83134 15.4487C6.76134 15.4487 6.68133 15.4187 6.63133 15.3687C6.52133 15.2587 6.52133 15.0787 6.63133 14.9688L14.8713 6.72876C14.9813 6.61876 15.1613 6.61876 15.2713 6.72876C15.3813 6.83876 15.3813 7.01872 15.2713 7.12872L7.03134 15.3687C6.98134 15.4187 6.90134 15.4487 6.83134 15.4487Z" fill="currentColor"/>
            <path d="M15.0713 15.4487C15.0013 15.4487 14.9213 15.4187 14.8713 15.3687L6.63133 7.12872C6.52133 7.01872 6.52133 6.83876 6.63133 6.72876C6.74133 6.61876 6.92134 6.61876 7.03134 6.72876L15.2713 14.9688C15.3813 15.0787 15.3813 15.2587 15.2713 15.3687C15.2213 15.4187 15.1413 15.4487 15.0713 15.4487Z" fill="currentColor"/>
          </svg>
        </button>
      }
    </ul>
  </div>
}
